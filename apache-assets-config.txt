# Apache Konfiguration für Asset-Handling
# Diese Konfiguration sollte in die Virtual Host Konfiguration oder .htaccess eingefügt werden

# Asset-Caching und korrekte MIME-Types
<IfModule mod_mime.c>
    # Font MIME-Types
    AddType font/woff .woff
    AddType font/woff2 .woff2
    AddType font/truetype .ttf
    AddType font/opentype .otf
    
    # Image MIME-Types
    AddType image/webp .webp
    AddType image/jpeg .jpg .jpeg
    AddType image/png .png
    
    # Video MIME-Types
    AddType video/mp4 .mp4
    AddType video/quicktime .mov
</IfModule>

# Cache-Headers für Assets
<IfModule mod_expires.c>
    ExpiresActive On
    
    # Fonts - 1 Jahr
    ExpiresByType font/woff "access plus 1 year"
    ExpiresByType font/woff2 "access plus 1 year"
    ExpiresByType font/truetype "access plus 1 year"
    ExpiresByType font/opentype "access plus 1 year"
    
    # Bilder - 1 Monat
    ExpiresByType image/webp "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    
    # Videos - 1 Woche
    ExpiresByType video/mp4 "access plus 1 week"
    ExpiresByType video/quicktime "access plus 1 week"
</IfModule>

# Gzip-Kompression
<IfModule mod_deflate.c>
    # Fonts komprimieren
    AddOutputFilterByType DEFLATE font/woff
    AddOutputFilterByType DEFLATE font/woff2
    AddOutputFilterByType DEFLATE font/truetype
    AddOutputFilterByType DEFLATE font/opentype
    
    # CSS und JS komprimieren
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# Asset-Zugriff sicherstellen
<FilesMatch "\.(woff|woff2|ttf|otf|webp|jpg|jpeg|png|mp4|mov)$">
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, HEAD, OPTIONS"
    Header always set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
</FilesMatch>

# Falls Assets nicht gefunden werden, versuche ohne Cache
<IfModule mod_headers.c>
    # Für Asset-Debugging
    <FilesMatch "\.(woff|woff2|ttf|otf|webp|jpg|jpeg|png)$">
        Header always set Cache-Control "public, max-age=31536000"
        Header always unset ETag
        FileETag None
    </FilesMatch>
</IfModule>

# WICHTIG: Stelle sicher, dass folgende Apache-Module aktiviert sind:
# - mod_rewrite (für SPA-Routing)
# - mod_mime (für korrekte MIME-Types)
# - mod_expires (für Caching)
# - mod_deflate (für Kompression)
# - mod_headers (für Header-Manipulation)
#
# UND: AllowOverride All muss in der Virtual Host Konfiguration gesetzt sein! 